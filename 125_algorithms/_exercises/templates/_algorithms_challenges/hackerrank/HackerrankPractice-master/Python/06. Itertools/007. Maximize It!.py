# Problem: https://www.hackerrank.com/challenges/maximize-it/problem
# Score: 50


____ i.. _______ product

k, m  map(i.., input().s..
n  (l.. m..(i.., input().s..()))[1:] ___ _ __ r..(k
results  (s..(i**2 ___ i __ x) % m ___ x __ product(*n
print(m..(results
